<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡ä»¶ç®¡ç†å™¨åº”ç”¨ - ä¸»ç•Œé¢</title>
    <link rel="icon" href="data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2016%2016'%3E%3Crect%20width='16'%20height='16'%20fill='%23007acc'/%3E%3Ctext%20x='8'%20y='11'%20font-family='Arial'%20font-size='9'%20text-anchor='middle'%20fill='%23fff'%3EFM%3C/text%3E%3C/svg%3E">
    <link rel="stylesheet" href="base.css">
    <link rel="stylesheet" href="window-framework.css">
    <link rel="stylesheet" href="file-manager.css">

    <style>
        .plain-link {
            background: none;
            border: none;
            color: var(--link-color, #0066cc);
            text-decoration: underline;
            cursor: pointer;
            padding: 0;
            font: inherit;
            display: inline;
        }
        
        .plain-link:hover {
            color: var(--link-hover-color, #004499);
            text-decoration: none;
        }
        /* æ·»åŠ ä¸»ç•Œé¢æ ‡è¯†æ ·å¼ */
        
        .main-indicator {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #4CAF50;
            color: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: bold;
        }
        /* æ–°å¢çš„æŒ‰é’®ç»„æ ·å¼ */
        
        .scm-button-group {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }
        
        .scm-button-group .scm-btn {
            flex: 1;
            padding: 6px 12px;
            border: 1px solid #ccc;
            background: #f5f5f5;
            cursor: pointer;
            border-radius: 4px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .scm-button-group .scm-btn.primary {
            background: #007acc;
            color: white;
            border-color: #007acc;
        }
        
        .scm-button-group .scm-btn.auto {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }
        
        .scm-actions {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: stretch;
            width: 100%;
            max-width: 520px;
        }
        
        .scm-commit-input {
            width: 100%;
            padding: 6px 10px;
            border: 1px solid var(--border-color, #ccc);
            border-radius: 4px;
            box-sizing: border-box;
            background: var(--input-bg, #fff);
        }
        /* Compact file list: only show size column */
        
        .file-manager.compact .file-header,
        .file-manager.compact .file-item-detailed {
            display: grid !important;
            grid-template-columns: 80px 1fr !important;
            /* å·¦ï¼šå¤§å°ï¼Œå³ï¼šåç§° */
            padding: 8px 12px !important;
            gap: 8px !important;
            align-items: center;
        }
        
        .file-manager.compact .file-header-item,
        .file-manager.compact .file-cell {
            padding: 4px 8px !important;
            display: block !important;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .file-manager.compact .file-size {
            text-align: left !important;
            font-weight: 600;
            min-width: 60px;
        }
        
        .file-manager.compact .file-name {
            text-align: left !important;
            color: var(--text-primary);
        }
    </style>
</head>

<body>

    <!-- é¡¶éƒ¨æ ï¼ˆé»‘è‰²ï¼‰å†…éƒ¨çª—å£æ§åˆ¶æŒ‰é’®ï¼Œæ ·å¼ç¾åŒ– -->
    <!-- ...existing code... -->

    <div class="title-bar">
        <div class="title-text">æ–‡ä»¶ç®¡ç†å™¨åº”ç”¨ - ä¸»ç•Œé¢</div>
        <div class="window-controls">
            <button class="window-btn minimize-btn" title="æœ€å°åŒ–">
                <svg width="14" height="14" viewBox="0 0 14 14">
                    <rect x="3" y="10" width="8" height="2" rx="1" fill="#fff" />
                </svg>
            </button>
            <button class="window-btn maximize-btn" title="æœ€å¤§åŒ–">
                <svg width="14" height="14" viewBox="0 0 14 14">
                    <rect x="2.5" y="2.5" width="9" height="9" rx="2" fill="none" stroke="#fff" stroke-width="1.5" />
                </svg>
            </button>
            <button class="window-btn close-btn" title="å…³é—­">
                <svg width="14" height="14" viewBox="0 0 14 14">
                    <line x1="4" y1="4" x2="10" y2="10" stroke="#fff" stroke-width="1.5" />
                    <line x1="10" y1="4" x2="4" y2="10" stroke="#fff" stroke-width="1.5" />
                </svg>
            </button>
        </div>
    </div>

    <div class="content">
        <div class="left-panel">
            <div class="left-sidebar">
                <div class="logo-loader-container">
                    <div class="logo">FM</div>
                    <div class="loader"></div>
                </div>
                <ul class="menu-list">
                    <li class="menu-item active" data-target="page-filemanager">æ–‡ä»¶ç®¡ç†å™¨</li>
                    <li class="menu-item" data-target="page-auto-submit">è‡ªåŠ¨æäº¤</li>
                    <li class="menu-item" data-target="page-workflow">å·¥ä½œæµ</li>
                    <li class="menu-item" data-target="page-settings">è®¾ç½®</li>
                    <li class="menu-item" data-target="page-docs">æ–‡æ¡£</li>
                    <li class="menu-item" data-target="page-help">å¸®åŠ©</li>
                    <li class="menu-item" data-target="page-about">å…³äº</li>
                </ul>
            </div>
            <div class="left-content">
                <!-- é¡µé¢ï¼šæ–‡ä»¶ç®¡ç†ï¼ˆé»˜è®¤æ˜¾ç¤ºï¼‰ -->
                <div id="page-filemanager" class="left-page">
                    <div class="scm-panel">
                        <div class="scm-header">
                            <button class="scm-branch-btn"><span class="branch-icon">ğŸŒ¿</span> <span class="branch-label">åˆ†æ”¯:</span> <span class="branch-name">main</span></button>
                            <!-- åœ¨æäº¤ä¿¡æ¯è¾“å…¥æ¡†ä¸‹æ–¹æ·»åŠ æŒ‰é’®ç»„ -->
                            <div class="scm-actions">
                                <input id="commit-input" class="scm-commit-input" placeholder="å¡«å†™æäº¤ä¿¡æ¯ï¼ˆä¾‹å¦‚: ä¿®å¤æ ·å¼ï¼‰">
                                <div class="scm-button-group">
                                    <button id="commit-btn" class="scm-btn">æäº¤</button>
                                    <button id="push-btn" class="scm-btn primary">æ¨é€</button>
                                    <button id="auto-btn" class="scm-btn auto" title="æäº¤å¹¶æ¨é€">æäº¤å¹¶æ¨é€</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="file-manager compact">
                        <div class="file-header">
                            <div class="file-header-item file-size">å¤§å°</div>
                            <div class="file-header-item file-name">åç§°</div>
                        </div>
                        <div class="file-list"></div>
                    </div>
                </div>

                <!-- å…¶ä»–é¡µé¢ -->
                <div id="page-auto-submit" class="left-page" style="display:none; padding:8px;">
                    <div style="margin-bottom:8px; display:flex; gap:8px; align-items:center;">
                        <button id="auto-start-btn" class="control-btn primary">å¯åŠ¨</button>
                        <button id="auto-stop-btn" class="control-btn" style="display:none;">åœæ­¢</button>
                        <div style="margin-left:auto;">
                            <button id="auto-run-now-btn" class="control-btn">ç«‹å³è¿è¡Œ</button>
                        </div>
                    </div>
                    <div class="node-info" style="border:1px solid var(--border-color); padding:10px; border-radius:6px; background:var(--panel-bg);">
                        <div><strong>èŠ‚ç‚¹åç§°:</strong> <span id="node-name">æœ¬åœ°èŠ‚ç‚¹</span></div>
                        <div><strong>çŠ¶æ€:</strong> <span id="node-status">ç©ºé—²</span></div>
                        <div><strong>ä¸Šæ¬¡è¿è¡Œ:</strong> <span id="node-last">-</span></div>
                        <div style="margin-top:8px;"><strong>è¯¦æƒ…:</strong> <span id="node-details">-</span></div>
                    </div>
                    <!-- Workflow component (from workflow.html) - embedded minimal change -->
                    <div class="workflow-component" style="margin-top:12px;">
                        <style>
                            /* å·¥ä½œæµæ ·å¼ */
                            
                            .workflow-component {
                                position: relative;
                                width: 100%;
                                height: 400px;
                                overflow: hidden;
                                border: 2px dashed #ddd;
                                background: #fafafa;
                                border-radius: 8px;
                            }
                            
                            .workflow-component .canvas-container {
                                position: absolute;
                                top: 0;
                                left: 0;
                                width: 2000px;
                                height: 100%;
                                cursor: grab;
                                background-image: linear-gradient(90deg, transparent 99px, #f0f0f0 1px), linear-gradient(0deg, transparent 99px, #f0f0f0 1px);
                                background-size: 100px 100px;
                            }
                            
                            .workflow-component .canvas-container:active {
                                cursor: grabbing;
                            }
                            
                            .workflow-component .nodes-area {
                                position: absolute;
                                top: 0;
                                left: 0;
                                width: 100%;
                                height: 100%;
                                pointer-events: none;
                            }
                            
                            .workflow-component .node {
                                position: absolute;
                                background: #4285f4;
                                color: white;
                                padding: 10px 15px;
                                border-radius: 6px;
                                cursor: move;
                                min-width: 80px;
                                text-align: center;
                                z-index: 2;
                                pointer-events: auto;
                                user-select: none;
                                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
                                font-size: 12px;
                                font-weight: bold;
                            }
                            
                            .workflow-component .node:hover {
                                background: #3367d6;
                                transform: translateY(-1px);
                            }
                            
                            .workflow-component .connector {
                                position: absolute;
                                top: 0;
                                left: 0;
                                width: 100%;
                                height: 100%;
                                pointer-events: none;
                                z-index: 1;
                            }
                            
                            .workflow-component .viewport-info {
                                position: absolute;
                                top: 10px;
                                right: 10px;
                                background: rgba(0, 0, 0, 0.5);
                                color: white;
                                padding: 5px 10px;
                                border-radius: 4px;
                                font-size: 12px;
                                z-index: 3;
                                pointer-events: none;
                            }
                            
                            .workflow-component .canvas-controls {
                                position: absolute;
                                bottom: 10px;
                                right: 10px;
                                z-index: 3;
                                pointer-events: auto;
                                display: flex;
                                gap: 5px;
                            }
                            
                            .workflow-component .canvas-btn {
                                background: rgba(255, 255, 255, 0.9);
                                border: 1px solid #ddd;
                                padding: 5px 10px;
                                border-radius: 4px;
                                cursor: pointer;
                                font-size: 12px;
                            }
                            
                            .workflow-component .canvas-btn:hover {
                                background: white;
                            }
                            
                            .controls {
                                display: flex;
                                gap: 8px;
                                align-items: center;
                            }
                            
                            .control-btn {
                                background: #4285f4;
                                color: white;
                                border: none;
                                padding: 8px 16px;
                                border-radius: 4px;
                                cursor: pointer;
                                font-size: 14px;
                            }
                            
                            .control-btn:hover {
                                background: #3367d6;
                            }
                            
                            .status {
                                margin-left: auto;
                                font-size: 14px;
                                color: #666;
                            }
                            
                            .workflow-component .nodes-area {
                                height: 260px;
                                border: 1px dashed #ddd;
                                position: relative;
                                background: transparent;
                            }
                            
                            .workflow-component .node {
                                position: absolute;
                                background: #4285f4;
                                color: #fff;
                                padding: 8px 12px;
                                border-radius: 6px;
                                cursor: move;
                                min-width: 70px;
                                text-align: center;
                                z-index: 2;
                            }
                            
                            .workflow-component .connector {
                                position: absolute;
                                top: 0;
                                left: 0;
                                width: 100%;
                                height: 100%;
                                pointer-events: none;
                                z-index: 1;
                            }
                        </style>
                        <div class="nodes-area" id="wfNodesArea">
                            <canvas id="wfConnectorCanvas" class="connector"></canvas>
                            <div class="node" id="wf-node1" style="left:16px;top:40%">æ ¹èŠ‚ç‚¹</div>
                            <div class="node" id="wf-node2" style="left:320px;top:25%">å­èŠ‚ç‚¹1</div>
                            <div class="node" id="wf-node3" style="left:320px;top:55%">å­èŠ‚ç‚¹2</div>
                        </div>
                        <script>
                            // åˆ›å»ºå…¨å±€Workflowå¯¹è±¡ç®¡ç†æ‰€æœ‰å·¥ä½œæµåŠŸèƒ½
                            window.Workflow = window.Workflow || {
                                // çŠ¶æ€å˜é‡
                                canvasContainer: null,
                                canvas: null,
                                ctx: null,
                                viewportInfo: null,
                                nodesArea: null,
                                nodes: [],
                                isDraggingCanvas: false,
                                canvasStartX: 0,
                                canvasStartY: 0,
                                canvasOffsetX: 0,
                                canvasOffsetY: 0,
                                isDraggingNode: false,
                                activeNode: null,
                                nodeOffsetX: 0,
                                nodeOffsetY: 0,
                                zoomLevel: 1, // ç¼©æ”¾çº§åˆ«åˆå§‹åŒ–ä¸º1

                                // åˆå§‹åŒ–ç”»å¸ƒ
                                setupCanvas: function() {
                                    if (!this.canvas || !this.canvasContainer) return;

                                    // è®¾ç½®canvaså°ºå¯¸ä¸ºè¶³å¤Ÿå¤§ï¼Œèƒ½å¤Ÿå®¹çº³æ‰€æœ‰èŠ‚ç‚¹å’Œè¿æ¥çº¿
                                    this.canvas.width = Math.max(this.canvasContainer.scrollWidth * 2, 1000);
                                    this.canvas.height = Math.max(this.canvasContainer.scrollHeight * 2, 600);
                                    this.updateViewport();
                                    this.updateViewportInfo();
                                    this.drawConnections();
                                },

                                // æ›´æ–°è§†å£ä½ç½®
                                updateViewport: function() {
                                    if (!this.canvasContainer) return;
                                    this.canvasContainer.style.transform = `translate(${this.canvasOffsetX}px, ${this.canvasOffsetY}px) scale(${this.zoomLevel})`;
                                },

                                // æ›´æ–°è§†å£ä¿¡æ¯
                                updateViewportInfo: function() {
                                    if (!this.viewportInfo) return;
                                    this.viewportInfo.textContent = `è§†å£: X=${-this.canvasOffsetX}, Y=${-this.canvasOffsetY}, ç¼©æ”¾: ${Math.round(this.zoomLevel * 100)}%`;
                                },

                                // ç»˜åˆ¶è¿æ¥çº¿
                                drawConnections: function() {
                                    if (!this.ctx || !this.canvas) return;

                                    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                                    this.ctx.strokeStyle = '#4285f4';
                                    this.ctx.lineWidth = 2;

                                    // ä¿å­˜å½“å‰ç»˜å›¾çŠ¶æ€
                                    this.ctx.save();

                                    // åº”ç”¨ç¼©æ”¾å˜æ¢ï¼Œä½¿è¿æ¥çº¿éšèŠ‚ç‚¹ä¸€èµ·ç¼©æ”¾
                                    this.ctx.scale(this.zoomLevel, this.zoomLevel);

                                    const root = this.nodes[0];
                                    if (!root) return;

                                    // è·å–èŠ‚ç‚¹çš„å®é™…ä½ç½®ä¿¡æ¯
                                    const rootRect = root.getBoundingClientRect();
                                    const rootContainer = root.parentElement;
                                    const containerRect = rootContainer.getBoundingClientRect();

                                    // è®¡ç®—æ ¹èŠ‚ç‚¹åœ¨å®¹å™¨å†…çš„å®é™…ä½ç½®ï¼ˆè€ƒè™‘æ»šåŠ¨å’Œåç§»ï¼‰
                                    const rootX = rootRect.left - containerRect.left + rootContainer.scrollLeft;
                                    const rootY = rootRect.top - containerRect.top + rootContainer.scrollTop;

                                    // æ ¹èŠ‚ç‚¹å³ä¾§ä¸­å¿ƒåæ ‡
                                    const rootRight = rootX + rootRect.width;
                                    const rootCenterY = rootY + rootRect.height / 2;

                                    this.nodes.slice(1).forEach((node) => {
                                        const nodeRect = node.getBoundingClientRect();
                                        const nodeX = nodeRect.left - containerRect.left + rootContainer.scrollLeft;
                                        const nodeY = nodeRect.top - containerRect.top + rootContainer.scrollTop;

                                        // å­èŠ‚ç‚¹å·¦ä¾§ä¸­å¿ƒåæ ‡
                                        const nodeLeft = nodeX;
                                        const nodeCenterY = nodeY + nodeRect.height / 2;

                                        // ä»æ ¹èŠ‚ç‚¹å³ä¾§ä¸­é—´è¿æ¥åˆ°å­èŠ‚ç‚¹å·¦ä¾§ä¸­é—´
                                        this.drawConnection(rootRight, rootCenterY, nodeLeft, nodeCenterY);
                                    });

                                    // æ¢å¤ç»˜å›¾çŠ¶æ€
                                    this.ctx.restore();
                                },

                                // ç»˜åˆ¶å•ä¸ªè¿æ¥
                                drawConnection: function(startX, startY, endX, endY) {
                                    if (!this.ctx) return;

                                    const distance = Math.hypot(endX - startX, endY - startY);
                                    const controlOffset = distance * 0.3;

                                    this.ctx.beginPath();
                                    this.ctx.moveTo(startX, startY);
                                    this.ctx.bezierCurveTo(startX + controlOffset, startY, endX - controlOffset, endY, endX, endY);
                                    this.ctx.stroke();

                                    this.drawArrow(endX, endY, Math.atan2(endY - startY, endX - startX));
                                },

                                // ç»˜åˆ¶ç®­å¤´
                                drawArrow: function(x, y, angle) {
                                    if (!this.ctx) return;

                                    this.ctx.save();
                                    this.ctx.translate(x, y);
                                    this.ctx.rotate(angle);
                                    this.ctx.beginPath();
                                    this.ctx.moveTo(0, 0);
                                    this.ctx.lineTo(-8, -5);
                                    this.ctx.lineTo(-8, 5);
                                    this.ctx.closePath();
                                    this.ctx.fillStyle = '#4285f4';
                                    this.ctx.fill();
                                    this.ctx.restore();
                                },

                                // åˆå§‹åŒ–å·¥ä½œæµ
                                init: function() {
                                    // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨åˆ°å½“å‰å¯¹è±¡
                                    this.onCanvasMouseDown = this.onCanvasMouseDown.bind(this);
                                    this.onMouseMove = this.onMouseMove.bind(this);
                                    this.onMouseUp = this.onMouseUp.bind(this);
                                    this.onNodeMouseDown = this.onNodeMouseDown.bind(this);

                                    // è·å–DOMå…ƒç´  - åœ¨index.htmlä¸­ï¼ŒwfNodesAreaæ˜¯å®¹å™¨
                                    this.canvasContainer = document.getElementById('wfNodesArea');
                                    this.canvas = document.getElementById('wfConnectorCanvas');
                                    this.viewportInfo = document.getElementById('viewportInfo');
                                    this.nodesArea = this.canvasContainer; // å¤ç”¨åŒä¸€ä¸ªå®¹å™¨

                                    if (!this.canvasContainer || !this.canvas) return;

                                    this.ctx = this.canvas.getContext('2d');
                                    this.nodes = [
                                        document.getElementById('wf-node1'),
                                        document.getElementById('wf-node2'),
                                        document.getElementById('wf-node3')
                                    ].filter(node => node !== null);

                                    // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
                                    this.canvasContainer.addEventListener('mousedown', this.onCanvasMouseDown);
                                    document.addEventListener('mousemove', this.onMouseMove);
                                    document.addEventListener('mouseup', this.onMouseUp);

                                    // èŠ‚ç‚¹æ‹–åŠ¨äº‹ä»¶
                                    this.nodes.forEach(node => {
                                        node.addEventListener('mousedown', this.onNodeMouseDown);
                                    });

                                    // åˆå§‹åŒ–ç”»å¸ƒ
                                    this.setupCanvas();
                                },

                                // äº‹ä»¶å¤„ç†å‡½æ•°
                                onCanvasMouseDown: function(e) {
                                    if (e.target === this.canvasContainer || e.target === this.canvas) {
                                        this.isDraggingCanvas = true;
                                        this.canvasStartX = e.clientX - this.canvasOffsetX;
                                        this.canvasStartY = e.clientY - this.canvasOffsetY;
                                        this.canvasContainer.style.cursor = 'grabbing';
                                        e.preventDefault();
                                    }
                                },

                                onMouseMove: function(e) {
                                    if (this.isDraggingCanvas) {
                                        this.canvasOffsetX = e.clientX - this.canvasStartX;
                                        this.canvasOffsetY = e.clientY - this.canvasStartY;
                                        this.updateViewport();
                                        this.updateViewportInfo();
                                        e.preventDefault();
                                    } else if (this.isDraggingNode && this.activeNode) {
                                        const containerRect = this.canvasContainer.getBoundingClientRect();
                                        const newX = (e.clientX - containerRect.left - this.nodeOffsetX) / this.zoomLevel - this.canvasOffsetX;
                                        const newY = (e.clientY - containerRect.top - this.nodeOffsetY) / this.zoomLevel - this.canvasOffsetY;

                                        this.activeNode.style.left = newX + 'px';
                                        this.activeNode.style.top = newY + 'px';
                                        this.drawConnections();
                                        e.preventDefault();
                                    }
                                },

                                onMouseUp: function() {
                                    this.isDraggingCanvas = false;
                                    this.canvasContainer.style.cursor = 'grab';
                                    this.isDraggingNode = false;
                                    this.activeNode = null;
                                },

                                onNodeMouseDown: function(e) {
                                    this.isDraggingNode = true;
                                    this.activeNode = e.target;
                                    const rect = this.activeNode.getBoundingClientRect();
                                    const containerRect = this.canvasContainer.getBoundingClientRect();
                                    this.nodeOffsetX = e.clientX - rect.left;
                                    this.nodeOffsetY = e.clientY - rect.top;
                                    e.stopPropagation();
                                },

                                // æ§åˆ¶å‡½æ•°
                                zoomIn: function() {
                                    this.zoomLevel = Math.min(this.zoomLevel + 0.1, 2);
                                    this.updateViewport();
                                    this.updateViewportInfo();
                                    this.drawConnections();
                                },

                                zoomOut: function() {
                                    this.zoomLevel = Math.max(this.zoomLevel - 0.1, 0.5);
                                    this.updateViewport();
                                    this.updateViewportInfo();
                                    this.drawConnections();
                                },

                                exportLayout: function() {
                                    if (this.nodes.length === 0) return;

                                    const layout = this.nodes.map(node => {
                                        return {
                                            id: node.id,
                                            left: node.style.left,
                                            top: node.style.top,
                                            text: node.textContent
                                        };
                                    });

                                    const json = JSON.stringify(layout, null, 2);
                                    const blob = new Blob([json], {
                                        type: 'application/json'
                                    });
                                    const url = URL.createObjectURL(blob);
                                    const a = document.createElement('a');
                                    a.href = url;
                                    a.download = 'workflow-layout.json';
                                    document.body.appendChild(a);
                                    a.click();
                                    document.body.removeChild(a);
                                    URL.revokeObjectURL(url);

                                    const statusInfo = document.getElementById('statusInfo');
                                    if (statusInfo) {
                                        statusInfo.textContent = 'å¸ƒå±€å·²å¯¼å‡º';
                                        setTimeout(() => {
                                            statusInfo.textContent = 'å°±ç»ª';
                                        }, 2000);
                                    }
                                },

                                resetViewport: function() {
                                    this.canvasOffsetX = 0;
                                    this.canvasOffsetY = 0;
                                    this.zoomLevel = 1;
                                    this.updateViewport();
                                    this.updateViewportInfo();
                                    this.drawConnections();
                                },

                                extendCanvas: function() {
                                    if (!this.canvasContainer) return;
                                    this.canvasContainer.style.width = '3000px';
                                    this.setupCanvas();
                                },

                                // åˆ·æ–°å‡½æ•°
                                refresh: function() {
                                    try {
                                        this.setupCanvas();
                                    } catch (e) {
                                        console.error('Workflow refresh error', e);
                                    }
                                }
                            };

                            // åˆå§‹åŒ–å·¥ä½œæµ
                            window.Workflow.init();

                            // çª—å£å¤§å°è°ƒæ•´äº‹ä»¶
                            window.addEventListener('resize', function() {
                                window.Workflow.setupCanvas();
                            });

                            // å…¨å±€æ§åˆ¶å‡½æ•°ï¼ˆä¸æŒ‰é’®ç»‘å®šï¼‰
                            function zoomIn() {
                                window.Workflow.zoomIn();
                            }

                            function zoomOut() {
                                window.Workflow.zoomOut();
                            }

                            function exportLayout() {
                                window.Workflow.exportLayout();
                            }

                            function resetViewport() {
                                window.Workflow.resetViewport();
                            }

                            function extendCanvas() {
                                window.Workflow.extendCanvas();
                            }
                        </script>
                    </div>
                </div>

                <div id="page-settings" class="left-page" style="display:none; padding:16px;">
                    <h3>è®¾ç½®é¡µé¢</h3>
                    <p>è¿™æ˜¯è®¾ç½®é¡µé¢å†…å®¹ï¼ˆä¸»ç•Œé¢ï¼‰</p>
                </div>
                <div id="page-docs" class="left-page" style="display:none; padding:16px;">
                    <h3>æ–‡æ¡£é¡µé¢</h3>
                    <p>è¿™æ˜¯æ–‡æ¡£é¡µé¢å†…å®¹ï¼ˆä¸»ç•Œé¢ï¼‰</p>
                </div>
                <div id="page-help" class="left-page" style="display:none; padding:16px;">
                    <h3>å¸®åŠ©é¡µé¢</h3>
                    <p>è¿™æ˜¯å¸®åŠ©é¡µé¢å†…å®¹ï¼ˆä¸»ç•Œé¢ï¼‰</p>
                </div>
                <div id="page-about" class="left-page" style="display:none; padding:16px;">
                    <h3>å…³äºé¡µé¢</h3>
                    <p>æ–‡ä»¶ç®¡ç†å™¨åº”ç”¨ v1.0 - ä¸»ç•Œé¢ç‰ˆæœ¬</p>
                </div>

                <!-- é¡µé¢ï¼šå·¥ä½œæµ -->
                <div id="page-workflow" class="left-page" style="display:none; padding:8px;">
                    <!-- å·¥ä½œæµç¼–è¾‘å™¨å°†é€šè¿‡iframeå¼•å…¥ -->
                    <iframe id="workflow-iframe" src="workflow-new.html" style="width:100%; height:100%; border:none;"></iframe>
                </div>
            </div>
        </div>
        <div class="right-panel">
            <div class="top-controls" style="padding:16px;">
                <div class="control-row" style="margin-bottom:8px;">
                    <input type="text" id="path-input" class="url-input" placeholder="åœ¨æ­¤è¾“å…¥ Windows è·¯å¾„ï¼Œä¾‹å¦‚ C:\\Users\\Public">
                    <button class="control-btn" id="list-btn">åˆ—å‡ºè·¯å¾„</button>
                </div>
                <div class="control-row">
                    <input type="text" id="github-input" class="url-input" placeholder="å¡«å…¥ GitHub ä»“åº“ URLï¼Œä¾‹å¦‚ https://github.com/user/repo">
                    <button class="control-btn" id="github-btn">å¯¼å…¥ GitHub</button>
                </div>
            </div>

            <div class="fixed-container">
                <div class="control-section">
                    <div class="control-row">
                        <button class="control-btn" id="refresh-btn">åˆ·æ–°</button>
                        <input type="text" class="url-input" placeholder="æœç´¢æ–‡ä»¶...">
                    </div>
                </div>

                <div class="terminal">
                    <div class="terminal-content">
                        $ æ–‡ä»¶ç®¡ç†å™¨å·²å¯åŠ¨ï¼ˆä¸»ç•Œé¢ï¼‰$ å½“å‰ç›®å½•: C:\Users\Documents $ ç³»ç»Ÿè¿è¡Œæ­£å¸¸...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å·¥ä½œæµç¼–è¾‘å™¨ç›¸å…³ä»£ç å·²ç§»é™¤ï¼Œç°åœ¨é€šè¿‡iframeå¼•å…¥workflow-new.html

        // é¡µé¢åˆ‡æ¢åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const menuItems = document.querySelectorAll('.menu-item');
            const pages = document.querySelectorAll('.left-page');


            menuItems.forEach(item => {
                item.addEventListener('click', function() {
                    // ç§»é™¤æ‰€æœ‰activeç±»
                    menuItems.forEach(i => i.classList.remove('active'));
                    // éšè—æ‰€æœ‰é¡µé¢
                    pages.forEach(page => page.style.display = 'none');

                    // è®¾ç½®å½“å‰active
                    this.classList.add('active');
                    const target = this.getAttribute('data-target');
                    document.getElementById(target).style.display = 'block';
                });
            });

            // è‡ªåŠ¨æäº¤é¡µé¢äº¤äº’
            function setNodeInfo(info) {
                const name = document.getElementById('node-name');
                const status = document.getElementById('node-status');
                const last = document.getElementById('node-last');
                const details = document.getElementById('node-details');
                if (name) name.textContent = info.name || 'æœ¬åœ°èŠ‚ç‚¹';
                if (status) status.textContent = info.status || 'ç©ºé—²';
                if (last) last.textContent = info.last || '-';
                if (details) details.textContent = info.details || '-';
            }

            // å·¥ä½œæµç¼–è¾‘å™¨å·²åœ¨å·¥å…·æ ä¸­é€šè¿‡onclickäº‹ä»¶ç»‘å®š

            const start = document.getElementById('auto-start-btn');
            const stop = document.getElementById('auto-stop-btn');
            if (start && stop) {
                start.addEventListener('click', function() {
                    start.style.display = 'none';
                    stop.style.display = '';
                    setNodeInfo({
                        name: 'æœ¬åœ°èŠ‚ç‚¹',
                        status: 'è¿è¡Œä¸­',
                        last: new Date().toLocaleString(),
                        details: 'è‡ªåŠ¨ä»»åŠ¡å·²å¯åŠ¨ï¼ˆä¸»ç•Œé¢ï¼‰ã€‚'
                    });
                });
                stop.addEventListener('click', function() {
                    stop.style.display = 'none';
                    start.style.display = '';
                    setNodeInfo({
                        name: 'æœ¬åœ°èŠ‚ç‚¹',
                        status: 'å·²åœæ­¢',
                        last: new Date().toLocaleString(),
                        details: 'è‡ªåŠ¨ä»»åŠ¡å·²åœæ­¢ï¼ˆä¸»ç•Œé¢ï¼‰ã€‚'
                    });
                });
            }
        });
    </script>
</body>

</html>